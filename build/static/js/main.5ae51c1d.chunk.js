(this["webpackJsonpreact-ui"]=this["webpackJsonpreact-ui"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=44},76:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(36),i=n.n(o),r=(n(43),n(11)),s=n(7),l=n(8),u=n(10),d=n(9),m=n(37),f=n.n(m),g=n(38),h=(n(76),n(0));function j(){var e=window.location.href.split("/");return e[e.length-1]}var b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={socket:Object(g.io)()},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"main",children:[Object(h.jsx)(p,{socket:this.state.socket}),Object(h.jsx)(R,{socket:this.state.socket})]})}}]),n}(c.a.Component),p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={LangId:"null",LangVal:"",EditorVal:""},a.setLangMeta=a.setLangMeta.bind(Object(r.a)(a)),a.setEditorVal=a.setEditorVal.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"setLangMeta",value:function(e,t){this.setState({LangId:e,LangVal:t})}},{key:"setEditorVal",value:function(e){this.setState({EditorVal:e})}},{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("message",(function(t){e.setEditorVal(t)}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"left-section",children:[Object(h.jsxs)("div",{className:"left-top",children:[Object(h.jsx)(v,{setLangMeta:this.setLangMeta}),Object(h.jsx)("u",{children:Object(h.jsxs)("b",{style:{fontSize:"0.8em"},children:["Share Room Id - ",j()]})})]}),Object(h.jsx)(O,{setEditorVal:this.setEditorVal,val:this.state.EditorVal,socket:this.props.socket}),Object(h.jsx)(k,{socket:this.props.socket}),Object(h.jsx)(y,{socket:this.props.socket,code:this.state.EditorVal,langMeta:{langId:this.state.LangId,langVal:this.state.LangVal}})]})}}]),n}(c.a.Component),v=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleChange=function(t){var n=t.target.selectedIndex,a=t.target.childNodes[n].getAttribute("id"),c=t.target.value;e.props.setLangMeta(a,c)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("select",{id:"lang",onChange:this.handleChange,children:[Object(h.jsx)("option",{id:"null",value:"",children:"select lang."}),Object(h.jsx)("option",{id:"c",value:"4",children:"C"}),Object(h.jsx)("option",{id:"cpp14",value:"2",children:"C++"}),Object(h.jsx)("option",{id:"java",value:"3",children:"Java JDK 14"}),Object(h.jsx)("option",{id:"python3",value:"3",children:"Python 3"})]})}}]),n}(c.a.Component),O=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleKeyUp=function(e){if("Tab"===e.key){e.preventDefault();var t=e.target.selectionStart,n=e.target.selectionEnd;e.target.value=e.target.value.substring(0,t)+"\t"+e.target.value.substring(n),e.target.selectionStart=e.target.selectionEnd=t+1}a.props.socket.emit("new message",e.target.value,j()),a.props.setEditorVal(e.target.value)},a.editorRef=c.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("message",(function(t){e.editorRef.current.value=t}))}},{key:"render",value:function(){return Object(h.jsx)("textarea",{className:"editor",placeholder:"write your code here",onKeyUp:this.handleKeyUp,ref:this.editorRef})}}]),n}(c.a.Component),k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).outputRef=c.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("code response",(function(t){e.outputRef.current.value="\nOutput -> ".concat(t.output," \n      \nmemory -> ").concat(t.memory," \ntime -> ").concat(t.cpuTime,"\n      ")}))}},{key:"render",value:function(){return Object(h.jsx)("textarea",{className:"output",value:this.props.CodeOutput,placeholder:"output",ref:this.outputRef,disabled:!0})}}]),n}(c.a.Component),y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).buttonRef=c.a.createRef(),a.imgRef=c.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.buttonRef.current.onclick=function(){""===e.props.langMeta.langVal||""===e.props.code?alert("ERROR !!! -> \n> Please select a language \n> OR Please write some code"):(e.imgRef.current.removeAttribute("hidden"),e.props.socket.emit("code run",j(),e.props.code,e.props.langMeta.langId,e.props.langMeta.langVal))},this.props.socket.on("code response",(function(){e.imgRef.current.setAttribute("hidden","")})),this.props.socket.on("loading",(function(){e.imgRef.current.removeAttribute("hidden")}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"code-control",children:[Object(h.jsx)("button",{id:"run_code",ref:this.buttonRef,children:"Run Code"}),Object(h.jsx)("img",{id:"loading",src:"/assets/loading.gif",alt:"loading indicator",ref:this.imgRef,hidden:!0})]})}}]),n}(c.a.Component),R=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"right-section",children:Object(h.jsx)(x,{socket:this.props.socket})})}}]),n}(c.a.Component),x=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={peer:new f.a(void 0,{config:{iceServers:[{url:"stun:stun1.l.google.com:19302"},{url:"turn:numb.viagenie.ca",credential:"6ZqrEudntxi8UJw",username:"ramandwivedi20@protonmail.com"}]}}),localStream:null,incommingStream:null},a.myVidRef=c.a.createRef(),a.incommingVidRef=c.a.createRef(),a.setIncommingStream=a.setIncommingStream.bind(Object(r.a)(a)),a.setLocalStream=a.setLocalStream.bind(Object(r.a)(a)),a}return Object(l.a)(n,[{key:"setIncommingStream",value:function(e){this.setState({incommingStream:e})}},{key:"setLocalStream",value:function(e){this.setState({localStream:e})}},{key:"componentDidMount",value:function(){var e=this;this.state.peer.on("open",(function(t){e.props.socket.emit("join room",j(),t)})),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.state.peer.on("call",(function(t){t.answer(e.state.localStream),t.on("stream",(function(t){e.setIncommingStream(t)}))})),e.props.socket.on("user connected",(function(t){e.state.peer.call(t,e.state.localStream).on("stream",(function(t){e.setIncommingStream(t)}))})),e.setLocalStream(t)}))}},{key:"componentDidUpdate",value:function(){this.myVidRef.current.srcObject=this.state.localStream,this.myVidRef.current.play(),this.incommingVidRef.current.srcObject=this.state.incommingStream,this.incommingVidRef.current.play()}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"video-section",children:[Object(h.jsx)("video",{className:"my_vid",poster:"/assets/dp.jpeg",ref:this.myVidRef,muted:!0}),Object(h.jsx)("video",{className:"incomming_vid",poster:"/assets/dp.jpeg",ref:this.incommingVidRef}),Object(h.jsx)(S,{socket:this.props.socket,stream:this.state.localStream})]})}}]),n}(c.a.Component),S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).bg1=null,a.bg2=null,a.micToggleRef=c.a.createRef(),a.camToggleRef=c.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.micToggleRef.current.onclick=function(){null===e.bg1?e.bg1="red":e.bg1=null,e.micToggleRef.current.style.backgroundColor=e.bg1},this.camToggleRef.current.onclick=function(){null===e.bg2?e.bg2="red":e.bg2=null,e.camToggleRef.current.style.backgroundColor=e.bg2}}},{key:"render",value:function(){var e=this,t=this.props.stream;return Object(h.jsxs)("div",{className:"controls",children:[Object(h.jsx)("button",{title:"mute/unmute",id:"audio-off",onClick:function(){t.getAudioTracks()[0].enabled=!t.getAudioTracks()[0].enabled},ref:this.micToggleRef,children:Object(h.jsx)("img",{src:"/assets/icons/mic_on.png",alt:"mic-on"})}),Object(h.jsx)("button",{title:"leave call",id:"leave",onClick:function(){e.props.socket.emit("leave-meeting",j()),window.location="http://"+window.location.host+"/end"},children:Object(h.jsx)("img",{src:"/assets/icons/call_end.png",alt:"call-end"})}),Object(h.jsx)("button",{title:"mute/unmute",id:"video-off",onClick:function(){t.getVideoTracks()[0].enabled=!t.getVideoTracks()[0].enabled},ref:this.camToggleRef,children:Object(h.jsx)("img",{src:"/assets/icons/videocam_on.png",alt:"vid-on"})})]})}}]),n}(c.a.Component),V=b,C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(V,{})}),document.getElementById("root")),C()}},[[78,1,2]]]);
//# sourceMappingURL=main.5ae51c1d.chunk.js.map